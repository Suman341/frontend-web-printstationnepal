{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\boysumo\\\\Downloads\\\\react\\\\printstationnepal\\\\src\\\\components\\\\cart\\\\cartbody.js\";\nimport React, { Component } from 'react';\nimport '../css/frontend.css';\nimport CartLoopData from './cartloopdata';\nimport { NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport OrdersComponent from \"../dashboard/admin/orders\";\n\nclass CartBody extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.checkout = () => {\n      let orders = [];\n      this.state.wishLists.forEach(item => {\n        orders.push({\n          productId: item.productId,\n          quantity: item.quantity\n        });\n      });\n      axios.post('http://localhost:5000/product/order', {\n        orders\n      }, this.state.config).then(response => {\n        localStorage.setItem('wishlist', JSON.stringify([]));\n        this.setState({\n          wishLists: [],\n          success: response.data.message,\n          error: undefined\n        }, () => {\n          setTimeout(function () {\n            window.location.reload();\n          }, 1000);\n        });\n      }).catch(error => {\n        this.setState({\n          error: error.response && error.response.message || \"Something went wrong, please try again\",\n          success: undefined\n        });\n      });\n    };\n\n    let wishLists = this.loadWishList();\n    this.state = {\n      wishLists,\n      orders: [],\n      userId: localStorage.getItem('id'),\n      success: undefined,\n      error: undefined,\n      config: {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:5000/orders', this.state.config).then(response => {\n      this.setState({\n        orders: response.data.data\n      });\n    });\n  }\n\n  loadWishList() {\n    try {\n      return JSON.parse(localStorage.getItem('wishlist')) || [];\n    } catch (e) {}\n\n    return [];\n  }\n\n  render() {\n    const wishListItems = this.state.wishLists.map((item, index) => {\n      return React.createElement(CartLoopData, {\n        key: item._id,\n        cid: item._id,\n        product: item,\n        onChange: () => {\n          let wishLists = this.loadWishList();\n          this.setState({\n            wishLists\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      });\n    });\n    let totalPrice = 0;\n    this.state.wishLists.forEach(item => {\n      totalPrice += item.price * item.quantity;\n    });\n    const myOrders = this.state.orders.map((order, index) => {\n      return React.createElement(OrdersComponent, {\n        key: order._id,\n        order: order,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      });\n    });\n    return React.createElement(\"div\", {\n      className: \"cart-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.state.success && React.createElement(\"div\", {\n      className: \"alert alert-info\",\n      style: {\n        display: this.state.success !== \"\" ? \"\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, this.state.success), this.state.error && React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: this.state.error !== \"\" ? \"\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, this.state.error), React.createElement(\"div\", {\n      className: \"container mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"mb-5 first-cap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Personal Cart\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-striped table-bordered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"thead-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Image\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Product Price\"), React.createElement(\"th\", {\n      scope: \"col\",\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"th\", {\n      scope: \"col\",\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Amount\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Action\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, wishListItems, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      colSpan: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Total\")), React.createElement(\"td\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"NPR \", totalPrice))))))), React.createElement(\"div\", {\n      className: \"col mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12  col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      to: \"/products\",\n      className: \"btn btn-lg btn-block btn-light text-uppercase\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Continue Shopping\")), React.createElement(\"div\", {\n      className: \"col-sm-12 col-md-6 text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-lg btn-block btn-info text-uppercase\",\n      onClick: this.checkout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Checkout\")))))), React.createElement(\"div\", {\n      className: \"container mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"mb-5 first-cap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"My Orders\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-striped table-bordered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"thead-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Product\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Total Price\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Status\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, this.state.orders.map(order => {\n      const _ref = order.product || {},\n            name = _ref.name,\n            price = _ref.price,\n            image = _ref.image;\n\n      return React.createElement(\"tr\", {\n        className: \"alert alert-info\",\n        style: {\n          display: this.state.success !== \"\" ? \"\" : \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        colSpan: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, this.state.success)), React.createElement(\"tr\", {\n        className: \"alert alert-danger\",\n        style: {\n          display: this.state.error !== \"\" ? \"\" : \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        colSpan: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, this.state.error)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"first-cap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: `http://localhost:5000/${image}`,\n        alt: name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        className: \"first-cap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, name), React.createElement(\"td\", {\n        className: \"first-cap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \" \", order.quantity, \" \", React.createElement(\"i\", {\n        className: \"ti-arrow-down\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        className: \"first-cap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \" \", order.quantity * price, \" \", React.createElement(\"i\", {\n        className: \"ti-arrow-down\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"badge badge-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, order.status)));\n    }))))))));\n  }\n\n}\n\nexport default CartBody;","map":{"version":3,"sources":["C:/Users/boysumo/Downloads/react/printstationnepal/src/components/cart/cartbody.js"],"names":["React","Component","CartLoopData","NavLink","axios","OrdersComponent","CartBody","constructor","props","handleChange","e","setState","target","name","value","checkout","orders","state","wishLists","forEach","item","push","productId","quantity","post","config","then","response","localStorage","setItem","JSON","stringify","success","data","message","error","undefined","setTimeout","window","location","reload","catch","loadWishList","userId","getItem","headers","componentDidMount","get","parse","render","wishListItems","map","index","_id","totalPrice","price","myOrders","order","display","product","image","status"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../css/frontend.css';\nimport CartLoopData from './cartloopdata';\nimport {NavLink} from 'react-router-dom';\n\nimport axios from 'axios';\nimport OrdersComponent from \"../dashboard/admin/orders\";\n\nclass CartBody extends Component {\n    constructor(props) {\n        super(props);\n\n        let wishLists = this.loadWishList();\n\n        this.state = {\n            wishLists,\n            orders: [],\n            userId: localStorage.getItem('id'),\n            success: undefined,\n            error: undefined,\n            config: {\n                headers: {'Authorization': `Bearer ${localStorage.getItem('token')}`}\n            }\n        }\n    }\n\n    componentDidMount() {\n        axios.get('http://localhost:5000/orders', this.state.config)\n            .then((response) => {\n                this.setState({orders: response.data.data})\n            });\n\n    }\n\n    loadWishList() {\n        try {\n            return JSON.parse(localStorage.getItem('wishlist')) || [];\n        } catch (e) {\n        }\n        return [];\n    }\n\n    handleChange = (e) => {\n        this.setState(\n            {[e.target.name]: e.target.value}\n        )\n    };\n\n    checkout = () => {\n        let orders = [];\n        this.state.wishLists.forEach(item => {\n            orders.push({\n                productId: item.productId,\n                quantity: item.quantity\n            })\n        });\n        axios.post('http://localhost:5000/product/order', {orders}, this.state.config)\n            .then((response) => {\n                localStorage.setItem('wishlist', JSON.stringify([]));\n                this.setState({\n                    wishLists: [],\n                    success: response.data.message,\n                    error: undefined\n                }, ()=>{\n                    setTimeout(function () {\n                        window.location.reload();\n                    }, 1000);\n                });\n            }).catch(error => {\n            this.setState({\n                error: (error.response && error.response.message) || \"Something went wrong, please try again\",\n                success: undefined\n            })\n        });\n    };\n\n    render() {\n        const wishListItems = this.state.wishLists.map((item, index) => {\n            return <CartLoopData key={item._id} cid={item._id} product={item} onChange={() => {\n                let wishLists = this.loadWishList();\n                this.setState({wishLists})\n            }\n            }/>\n        });\n        let totalPrice = 0;\n        this.state.wishLists.forEach(item => {\n            totalPrice += item.price * item.quantity;\n        });\n\n        const myOrders = this.state.orders.map((order, index) => {\n            return <OrdersComponent key={order._id} order={order}/>\n        });\n\n        return (\n            <div className=\"cart-body\">\n                {\n                    this.state.success &&\n                    <div className=\"alert alert-info\" style={{display: this.state.success !== \"\" ? \"\" : \"none\"}}>\n                        {this.state.success}\n                    </div>\n                }\n                {\n                    this.state.error &&\n                    <div className=\"alert alert-danger\" style={{display: this.state.error !== \"\" ? \"\" : \"none\"}}>\n                        {this.state.error}\n                    </div>\n                }\n                <div className=\"container mb-4\">\n                    <h2 className=\"mb-5 first-cap\">Personal Cart</h2>\n\n                    <div className=\"row\">\n                        <div className=\"col-12\">\n                            <div className=\"table-responsive\">\n                                <table className=\"table table-striped table-bordered\">\n                                    <thead className=\"thead-dark\">\n                                    <tr>\n                                        <th scope=\"col\">Image</th>\n                                        <th scope=\"col\">Name</th>\n                                        <th scope=\"col\">Product Price</th>\n                                        <th scope=\"col\" className=\"text-center\">Quantity</th>\n                                        <th scope=\"col\" className=\"text-center\">Amount</th>\n                                        <th>Action</th>\n                                    </tr>\n                                    </thead>\n                                    <tbody>\n                                    {wishListItems}\n                                    <tr>\n                                        <td colSpan=\"4\"></td>\n                                        <td><strong>Total</strong></td>\n                                        <td className=\"text-center\"><strong>NPR {totalPrice}</strong></td>\n                                    </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                        <div className=\"col mb-2\">\n                            <div className=\"row\">\n                                <div className=\"col-sm-12  col-md-6\">\n                                    <NavLink to=\"/products\" className=\"btn btn-lg btn-block btn-light text-uppercase\">Continue\n                                        Shopping</NavLink>\n                                </div>\n                                <div className=\"col-sm-12 col-md-6 text-right\">\n                                    <button className=\"btn btn-lg btn-block btn-info text-uppercase\"\n                                            onClick={this.checkout}>Checkout\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n\n                <div className=\"container mb-4\">\n                    <h2 className=\"mb-5 first-cap\">My Orders</h2>\n\n                    <div className=\"row\">\n                        <div className=\"col-12\">\n                            <div className=\"table-responsive\">\n                                <table className=\"table table-striped table-bordered\">\n                                    <thead className=\"thead-dark\">\n                                    <tr>\n                                        <th></th>\n                                        <th>Product</th>\n                                        <th>Quantity</th>\n                                        <th>Total Price</th>\n                                        <th>Status</th>\n                                    </tr>\n                                    </thead>\n                                    <tbody>\n                                    {this.state.orders.map(order => {\n                                        const {name, price, image} = order.product || {};\n\n                                        return <tr className=\"alert alert-info\"\n                                                   style={{display: this.state.success !== \"\" ? \"\" : \"none\"}}>\n                                            <td colSpan=\"6\">{this.state.success}</td>\n                                        </tr>,\n                                            <tr className=\"alert alert-danger\"\n                                                style={{display: this.state.error !== \"\" ? \"\" : \"none\"}}>\n                                                <td colSpan=\"6\">{this.state.error}</td>\n                                            </tr>,\n                                            <tr>\n                                                <td className=\"first-cap\">\n                                                    <img src={`http://localhost:5000/${image}`} alt={name}/>\n                                                </td>\n                                                <td className=\"first-cap\">{name}</td>\n                                                <td className=\"first-cap\"> {order.quantity} <i\n                                                    className=\"ti-arrow-down\"></i></td>\n                                                <td className=\"first-cap\"> {order.quantity * price} <i\n                                                    className=\"ti-arrow-down\"></i></td>\n                                                <td><label className=\"badge badge-success\">{order.status}</label></td>\n                                            </tr>\n                                    })}\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default CartBody;"]},"metadata":{},"sourceType":"module"}